<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;
      charset=windows-1252">
    <!---- COMMON START -------------------------->
    <link href="image/template_css.css" rel="stylesheet" type="text/css"
      media="screen">
    <link href="image/jsn_layout.css" rel="stylesheet" type="text/css"
      media="screen">
    <link href="image/jsn_typography.css" rel="stylesheet"
      type="text/css" media="screen">
    <link href="image/jsn_style.css" rel="stylesheet" type="text/css"
      media="screen">
    <link href="image/jasper-integration.css" rel="stylesheet"
      type="text/css" media="screen">
    <!--[if lte IE 6]>

<link href="/i/themes/theme_oc/css/jsn_fixie6.css" rel="stylesheet" type="text/css" />

<style type="text/css">

img { behavior: url(image/iepngfix.htc); }

</style><!--[endif]--><!--[if lte IE 7]>

<script type="text/javascript" src="image/suckerfish.js"></script>

<![endif]--><!--[if IE 7]>

<link href="image/jsn_fixie7.css" rel="stylesheet" type="text/css" />

<![endif]-->
    <link rel="stylesheet" href="image/oc.css" type="text/css">
    <!---- COMMON END -------------------------->
    <style type="text/css">
<!--
.Stil1 {font-family: "Courier New", Courier, monospace;}
.Stil2 {
	color: #006600;
	font-weight: bold;
}
-->
  </style>
    <style type="text/css">
<!--
.Stil1 {font-family: "Courier New", Courier, monospace;}
-->
  </style>
    <title>JasperReportsIntegration - About the integration</title>
  </head>
  <body>
    <div class="moduletable-plain header-arrow">
      <h2>About the integration (Version @project.version@)</h2>
      <p>The main purpose is to provide a cost free alternative for
        high-fidelity printing / PDF generation with <a
          href="http://apex.oracle.com" target="_blank">Oracle APEX</a>.
        For doing so, I have built an integration kit to easily run <a
          href="http://www.jaspersoft.com/jasperreports" target="_blank">Jasper



          Reports</a> reports from within your Oracle APEX application.</p>
      <p>The current release of the JasperReportsIntegration uses <span
          style="font-weight: bold;">JasperReports @jasperreports.version@</span> to
        render the reports.
        <!-- p class="info">If you have any questions, problems or enhancement requests, you can report
them in the forum: <a href="https://www.opal-consulting.de/forums" target="_blank">https://www.opal-consulting.de/forums</a><a href="https://www.opal-consulting.de/forums" target="_blank"> </a>
</p --> </p>
      <span style="font-weight: bold;"></span>
      <h3>Requirements</h3>
      <ul>
        <li><span style="font-weight: bold;">Oracle Database Release</span>:
          The minimum requirement is the availability of the
          package&nbsp;<span class="formattedCode">UTL_HTTP</span>. Thus
          the integration will work with all Oracle versions in which
          Oracle APEX can be installed, <span style="font-weight:
            bold;">even Oracle XE (10g)</span>. &nbsp;<br>
        </li>
        <li><span style="font-weight: bold;">Oracle APEX Release:</span>
          The minimum release for the test application is <span
            style="font-weight: bold;">APEX 4.2</span>.&nbsp; Aside from
          the test application is no dependency on a specific Oracle
          APEX Release, therefore it should work with any Oracle APEX
          Release.<br>
        </li>
        <li>100MB of disk space.</li>
        <li><span style="font-weight: bold;">J2EE Server:</span> I am
          still compatible with the fairly old servlet specification 2.5
          (Java JDK 1.8), thus the J2EE application should work in most
          J2EE servers, it even works with Apache Tomcat 5.5.</li>
      </ul>
      <p> </p>
      <h3>How does it work?</h3>
      <p>For the integration I have chosen the Open Source reporting
        engine <a
href="http://jasperforge.org/plugins/project/project_home.php?projectname=jasperreports"
          target="_blank">Jasper Reports</a> (basically a java library)
        to run reports against an Oracle database to produce reports in
        various formats like PDF, RTF and XLS. </p>
      <p>This integration approach focuses on the integration with
        Jasper Reports, but is not limited to it. Using a generic
        URL-based approach, it can easily be extended to call any other
        reporting engine that provides a URL based interface for running
        reports, for example Oracle Reports, BIRT or Crystal Reports. </p>
      <h4>What are the parts of the integration? </h4>
      The integration kit consists of the following components:
      <ul class="">
        <li>a J2EE application to call the specified report definition
          file, make a connection to the target database and return the
          generated report
          <ul>
            <li>This J2EE application (<span style="font-weight: bold;"
                class="Stil1">JasperReportsIntegration.war</span>) is
              deployed in a standard J2EE container. </li>
            <li>Also, all reports we want to use have to be copied to
              the J2EE server, so that they are accessible by the J2EE
              application. These Jasper Report definition files are
              usually created with the <a
                href="http://jasperforge.org/projects/ireport"
                target="_blank">iReport designer</a> or the newer <a
                href="http://community.jaspersoft.com/project/jaspersoft-studio"
                target="_blank">Jaspersoft Studio</a>, this is the most
              convenient way.</li>
            <li>Finally, we need to configure the datasources in the
              J2EE server (or the application.properties file) to
              connect to our Oracle databases. <br>
            </li>
          </ul>
        </li>
        <li>a PL/SQL interface which can you can use in your application
          (package <span style="font-weight: bold;" class="Stil1">XLIB_JASPERREPORTS</span>)
        </li>
        <ul>
          <li>This package essentially takes the parameters and
            constructs a URL for the J2EE application. This URL is then
            passed to the J2EE application via <span class="Stil1">UTL_HTTP</span>.
            Once the report is run, it will return the report as a BLOB.
            This BLOB can be displayed immediately, stored in the
            database or sent via Email.</li>
        </ul>
      </ul>
      <h4>Preparation</h4>
      <p>First of all, we need to design the report. The preferred
        method is to use the newer <a
          href="http://community.jaspersoft.com/project/jaspersoft-studio"
          target="_blank">Jaspersoft Studio</a> to create the report
        definition file, but reports created with the older <a
          href="http://jasperforge.org/projects/ireport" target="_blank">iReport



          designer</a> will also work. We use a JDBC connection to
        connect to the target Oracle Schema and design the report. The
        report definition file is then copied into a specific directory
        on the J2EE server so that it can be used by the J2EE
        application (JasperReportsIntegration). </p>
      <p>Next we use the PL/SQL call interface in our APEX application
        to call the report and pass all required parameters to it. </p>
      <h4>One roundtrip ... </h4>
      <p>Once the user invokes the report generation functionality (by
        clicking on a link or a button), usually a PL/SQL process is
        invoked to call the report, e.g.: </p>
      <div class="Stil1">
        <p>begin<br>
          &nbsp;&nbsp;xlib_jasperreports.show_report&nbsp;(p_rep_name
          =&gt; :p5_rep_name,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_rep_format
=&gt;



          :p5_rep_format,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_data_source
=&gt;



          :p5_data_source,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_out_filename
=&gt;



          :p5_out_filename,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_rep_locale
=&gt;



          :p5_rep_locale,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_rep_encoding
=&gt;



          :p5_rep_encoding,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_additional_params
=&gt;



          :p5_additional_params);<br>
          <br>
          &nbsp;&nbsp;-- stop rendering of the current APEX page <br>
          &nbsp; apex_application.g_unrecoverable_error := true;<br>
          end;</p>
      </div>
      <p>This will result in a URL like <span class="Stil1">http://localhost:8080/JasperReportsIntegration/report?_repName=test&amp;_repFormat=pdf&amp;_dataSource=default&amp;_outFilename=myTest.pdf&amp;_repLocale=de_DE&amp;_repEncoding=UTF-8&amp;p_deptno=10</span></p>
      <p>Within the J2EE server we have already defined a data source
        named <span class="Stil1">default</span>. For example this
        could be the <span class="Stil1">HR</span> schema in our target
        database. </p>
      <p>The J2EE application will use a JDBC connection from the
        connection pool to connect to the schema <span class="Stil1">HR</span>
        and run the report named <span class="Stil1">test</span>. </p>
      <p>Since the report format in our example is specified as PDF, the
        reporting engine will return a PDF document. </p>
      <p>This PDF document will be returned as a BLOB and thus can be
        displayed directly in our application, stored in the database or
        sent via email. </p>
      <h4>Security</h4>
      <p>This approach does not implement a security strategy at all.
        Nevertheless it is quite easy to implement security. By using a
        firewall we can prohibit access to the J2EE server and only
        allow communication between the Oracle database and the J2EE
        server. This way we easily implement all required authentication
        and authorization just within our APEX application. </p>
    </div>
  </body>
</html>
