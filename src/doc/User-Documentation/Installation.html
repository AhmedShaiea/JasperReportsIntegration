<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  
  <meta http-equiv="content-type" content="text/html;

      charset=ISO-8859-1">

<!---- COMMON START -------------------------->
  
  <link href="image/template_css.css" rel="stylesheet" type="text/css" media="screen">

  
  <link href="image/jsn_layout.css" rel="stylesheet" type="text/css" media="screen">

  
  <link href="image/jsn_typography.css" rel="stylesheet" type="text/css" media="screen">

  
  <link href="image/jsn_style.css" rel="stylesheet" type="text/css" media="screen">

  
  <link href="image/jasper-integration.css" rel="stylesheet" type="text/css" media="screen">

<!--[if lte IE 6]>

<link href="/i/themes/theme_oc/css/jsn_fixie6.css" rel="stylesheet" type="text/css" />

<style type="text/css">

img { behavior: url(image/iepngfix.htc); }

</style><!--[endif]--><!--[if lte IE 7]>

<script type="text/javascript" src="image/suckerfish.js"></script>

<![endif]--><!--[if IE 7]>

<link href="image/jsn_fixie7.css" rel="stylesheet" type="text/css" />

<![endif]-->
  
  <link rel="stylesheet" href="image/oc.css" type="text/css">

<!---- COMMON END -------------------------->
  <title>JasperReportsIntegration - Installation</title>

  
  
  <style type="text/css">
<!--
.Stil1 {font-family: "Courier New", Courier, monospace; font-size: 12px}
.Stil2 {
color: #006600;
font-weight: bold;
}
.Stil3 {
border:solid thin;
}
-->
  </style>
</head><body>
<div class="moduletable-plain header-arrow">
<h2>Installation</h2>
<ul>
</ul>
<ol>
  <li><a href="#Download_the_files">Download the files</a><br>
  </li>
  <li><a href="#Installation_in_the_J2EE_server">Installation in the
J2EE server</a><br>
  </li>
  <li><a href="#Installation_of_database_objects_">Installation of
database objects</a></li>
  <li><a href="#Installation_of_the_test_application">Installation of
the test application</a><br>
  </li>
</ol>
<ul>
</ul>
<h3><a name="Download_the_files"></a>1. Download the files</h3>
You can download the files from <a href="Download.html">here</a> and
unzip them.<br>
<h3><a name="Installation_in_the_J2EE_server"></a>2. Installation in
the
J2EE server</h3>
We need to install the J2EE application and configure the data sources
in this step. The J2EE application has to find various configuration
files (e.g.&nbsp;<span class="formattedCode">conf/application.properties</span>,&nbsp;
<span class="formattedCode">conf/log4j.properties</span>) and also the
different reports that we can run (e.g.&nbsp;<span class="formattedCode">reports/test.jasper</span>).<br>
<br>
It is recommended practice to separate the configuration-/report
files from the J2EE application itself. In the early versions of the
JasperReportsIntegration all reports were placed directly in the web
application
itself, for example into the directory&nbsp;<span class="formattedCode">$TOMCAT_HOME/webapps/reports.</span>
In order to easily upgrade your installation in the future it is
recommended to put the configuration and report files into a separate
directory and not store them inside of the J2EE application. <br>
<br>
Nevertheless the J2EE application must be able to locate these files.<br>
<br>
We have two options here:<br>
<ol>
  <li><a href="#j2ee_env_var">Configure the server environment using an
operating system
environment variable</a></li>
  <li><a href="#j2ee_context_var">Configure the setting in the web.xml
file of the
JasperReportsIntegration.war file</a></li>
</ol>
The difference comes into play when you deploy the
JasperReportsIntegration.war file multiple times on the same J2EE
server or on different J2EE servers on the same machine. <span style="font-weight: bold;">When
using the operating system environment variable, all instances of the
JasperReportsIntegration will use the same configuration and reports. </span><br>
<br>
<span style="font-weight: bold;">If you want to use different
configurations for your different instances</span>
on the same machine (either you deploy different version of the
JasperReportsIntegration or you have your development, test and
production environment running on the same machine but on different
J2EE servers), <span style="font-weight: bold;">you would use the
direct manipulation of the web.xml file</span>. <br>
<h4>2.1. <a name="j2ee_env_var"></a>Configure the server environment
using an operating system
environment variable</h4>
Using the operating system environment variable&nbsp;<span class="formattedCode">OC_JASPER_CONFIG_HOME</span>
we can configure where these files reside on the filesystem. This
directory is the same as the base directory of your downloaded files,
i.e. it should at least contain the subdirectories conf, reports, logs.<br>
<h5>2.1.1 Create the required directory structure</h5>
First you need to set up the required directory structure in the target
directory. Just copy the directories&nbsp;<span class="formattedCode">conf</span>,
<span class="formattedCode">reports</span> and&nbsp;<span class="formattedCode">logs</span> to the target directory, e.g.&nbsp;<span class="formattedCode">c:\app\JasperReportsIntegration</span>:<br>
<br>
<img style="border: 1px solid ; width: 179px; height: 168px;" alt="directory structure" src="image/jri_app_directory.png"><br>
<br>
<h5>2.1.2.a) Unix / Linux: set the environment variable<br>
</h5>
On a Unix / Linux system running Tomcat you could for example add this
setting to the Tomcat startup script (e.g.&nbsp;<span class="formattedCode">/usr/local/tomcat/bin/startup.sh</span>): <br>
<ul>
  <li> <span class="formattedCode">OC_JASPER_CONFIG_HOME=/opt/JasperReportsIntegration</span></li>
</ul>
<ul>
  <li><span class="formattedCode">export OC_JASPER_CONFIG_HOME</span></li>
</ul>
<h5>2.1.2.b) Windows: set the environment variable</h5>
On a Windows machine you could do the same (e.g.&nbsp;<span class="formattedCode">c:\program files\apache tomcat\bin\startup.cmd</span>):<br>
<ul>
  <li><span class="formattedCode">SET
OC_JASPER_CONFIG_HOME=c:\app\JasperReportsIntegration</span></li>
</ul>
or you could modify the system environment of the machine and create
the variable <span class="formattedCode">OC_JASPER_CONFIG_HOME=c:\app\JasperReportsIntegration<br>
</span>
<h4>2.2 <a name="j2ee_context_var"></a>Configure the setting in the
web.xml file of the
JasperReportsIntegration.war file</h4>
By
using this approach you can tell the JasperReportsIntegration.war file
directly where it can find its configuration files. The following
procedure will manipulate the J2EE context-parameter&nbsp;<span class="formattedCode">oc.jasper.config.home</span> in the file <span class="formattedCode">web.xml</span> of the&nbsp;<span class="formattedCode">JasperReportsIntegration.war</span> directly for
you.<br>
<h5>2.2.1 Create the required directory structure</h5>
First you need to set up the required directory structure in the target
directory. Just copy the directories&nbsp;<span class="formattedCode">conf</span>,
<span class="formattedCode">reports</span> and&nbsp;<span class="formattedCode">logs</span> to the target directory, e.g.&nbsp;<span class="formattedCode">c:\app\JasperReportsIntegration</span>:<br>
<br>
<img style="border: 1px solid ; width: 179px; height: 168px;" alt="directory structure" src="image/jri_app_directory.png"><br>
<br>
<h5>2.2.2.a) Unix / Linux:&nbsp; Set the configuration directory
directly in the JasperReportsIntegration.war file</h5>
In the following example we will use /opt/JasperReportsIntegration as
the target directory.<br>
<ul>
  <li><span class="formattedCode">cd bin</span></li>
</ul>
<ul>
  <li><span class="formattedCode">./setConfigDir.sh
../webapp/JasperReportsIntegration.war /opt/JasperReportsIntegration<br>
    </span></li>
</ul>
<ul>
  <ul>
  </ul>
</ul>
<h5>2.2.2.b) Windows:&nbsp; Set the configuration directory directly in
the JasperReportsIntegration.war file</h5>
In the following example we will use c:\app\JasperReportsIntegration as
the target directory.<br>
<ul>
  <li><span class="formattedCode">cd bin</span></li>
</ul>
<ul>
  <li><span class="formattedCode">setConfigDir.cmd
..\webapp\JasperReportsIntegration.war c:\app\JasperReportsIntegration<br>
    </span></li>
</ul>
<h5>2.2.3.a) Unix / Linux: Get the configuration directory from the
JasperReportsIntegration.war file</h5>
<h5> </h5>
In order to determine the configuration directory from a specific
JasperReportsIntegration.war file, you can run the following command to
see where it points to. This is just for verification purposes.<br>
<ul>
  <li><span class="formattedCode">cd bin</span></li>
</ul>
<ul>
  <li><span class="formattedCode">./getConfigDir.sh
../webapp/JasperReportsIntegration.war<br>
    </span></li>
</ul>
<h5>2.2.3.b) Windows: Get the configuration directory from the
JasperReportsIntegration.war file</h5>
<h5> </h5>
In order to determine the configuration directory from a specific
JasperReportsIntegration.war file, you can run the following command to
see where it points to. This is just for verification purposes.<br>
<ul>
  <li><span class="formattedCode">cd bin</span></li>
  <li><span class="formattedCode">getConfigDir.cmd
..\webapp\JasperReportsIntegration.war<br>
    </span></li>
</ul>
<ul>
</ul>
<h4>2.3 Configure your database access</h4>
Edit the file <span class="formattedCode">conf/application.properties</span><span class="formattedCode"></span>
in your target directory and configure the data source&nbsp;<span class="formattedCode">default</span>
to connect to your Oracle schema (change the parts in bold to point to
the Oracle schema you want to connect to): <br>
<br>
<div class="formattedCode">
#====================================================================<br>
# JDBC datasource configuration<br>
# http://www.orafaq.com/wiki/JDBC#Thin_driver<br>
# type=jdbc|jndi<br>
#====================================================================<br>
[datasource:default]<br>
type=<span style="font-weight: bold;">jdbc</span><br>
name=default<br>
url=jdbc:oracle:thin:@<span style="font-weight: bold;">192.168.2.114</span>:<span style="font-weight: bold;">1521</span>:<span style="font-weight: bold;">XE</span><br>
username=<span style="font-weight: bold;">HR</span><br>
password=<span style="font-weight: bold;">hr_password</span><br>
</div>
<br>
Alternatively you could use the native JNDI data source of your
application server. See the documentation there on how to configure it.
In this configuration file you would have to register just the JNDI
datasource you want to use: <br>
<br>
<div class="formattedCode">#====================================================================<br>
# Native JNDI datasource, to be configured in the application server<br>
# name: jndi_test<br>
#====================================================================<br>
[datasource:<span style="font-weight: bold;">jndi_test</span>]<br>
type=<span style="font-weight: bold;">jndi</span><br>
name=<span style="font-weight: bold;">jndi_test</span><br>
</div>
<h4>2.4 Encrypting all passwords in the application.properties file<br>
</h4>
You can optionally encrypt the passwords in the application.properties
file. Just follow the following steps, the file will automatically be
updated with the encrypted passwords for all of the datasources.<br>
<h5>2.4.1.a) Unix / Linux<br>
</h5>
<h5> </h5>
In order to determine the configuration directory from a specific
JasperReportsIntegration.war file, you can run the following command to
see where it points to. This is just for verification purposes.<br>
<ul>
  <li><span class="formattedCode">cd bin</span></li>
</ul>
<ul>
  <li><span class="formattedCode">./encryptPasswords.sh &lt;path to
application.properties file&gt;<br>
&nbsp; e.g.: ./encryptPasswords.sh
/opt/JasperReportsIntegration/conf/application.properties<br>
    </span></li>
</ul>
<h5>2.4.1.b) Windows</h5>
<h5> </h5>
In order to determine the configuration directory from a specific
JasperReportsIntegration.war file, you can run the following command to
see where it points to. This is just for verification purposes.<br>
<ul>
  <li><span class="formattedCode">cd bin</span></li>
  <li><span class="formattedCode">encryptPasswords.cmd &lt;path to
application.properties file&gt;<br>
&nbsp; e.g.: encryptPasswords.cmd
c:\app\JasperReportsIntegration\conf\application.properties</span><span class="formattedCode"><br>
    </span></li>
</ul>
<h4>2.5 Deploy the J2EE application<br>
</h4>
Take the application server of your choice and deploy the file&nbsp;<span class="formattedCode">webapp/JasperReportsIntegration.war</span> to
it. For an Apache Tomcat this typically means to copy the file
JasperReportsIntegration.war into the directory webapps of your Tomcat
application. If the Tomcat doesn't deploy it automatically, you would
have to restart the Tomcat. <br>
<br>
After that you can reach the JasperReportsIntegration
homepage with the URL&nbsp;<span class="formattedCode">http://&lt;server&gt;:&lt;port&gt;/JasperReportsIntegration</span>.
<br>
<br>
Here you will find the included documentation, information about the
location of the configuration files, you can test the database
connections and run the test reports:<br>
<br>
<img style="border: 1px solid ; width: 649px; height: 669px;" alt="" src="image/screenshot_360.png"><br>
<h4>2.6 Securing the homepage of the J2EE application<br>
</h4>
Since the homepage tells you a lot about the system you will typically
protect that information in a production environment. <br>
Therefore you can edit the file <span class="formattedCode">conf/application.properties</span> and set the config parameter&nbsp;<span class="formattedCode">infoPageIsEnabled=false</span>. <br>
<br>
<div class="formattedCode">
#====================================================================<br>
# Application properties (global)<br>
#====================================================================<br>
[application]<br>
configFileVersion=2.3.0<br>
jndiPrefix=java:comp/env/jdbc/<br>
# infoPageIsEnabled will show the initial start page of the j2ee
application<br>
# including testing and the environment settings<br>
<span style="font-weight: bold;">infoPageIsEnabled=false</span>
</div>
<br>
After you restart the J2EE application the homepage will be protected: <br>
<br>
<img style="border: 1px solid ; width: 966px; height: 131px;" alt="Protected Homepage" src="image/screenshot_protected_homepage.png"><br>
<h3><a name="Installation_of_database_objects_"></a>3. Installation of
database objects<br>
</h3>
<p>The database objects required for the integration will be installed
into each application schema that you want to use with the
integration.&nbsp;<br>
</p>
<p>The installation instructions will refer to the application schema
(in which you install the software) as <span class="formattedCode">[application
schema]</span>. The password for the application schema will be
referred to as <span class="formattedCode">[application schema
password]</span>. </p>
<p>Thus when I use an instruction like <span class="formattedCode">sqlplus
[application schema]/[application schema password]@[database]</span>
please replace that with the actual values of your local installation.
For example, if you want to install the integration kit into the schema
<span class="formattedCode">HR</span> with the password <span class="formattedCode">hr1</span> into your local XE instance (having a
TNS entry named <span class="formattedCode">xe</span>) then this
instruction translates to: </p>
<p><span class="formattedCode">sqlplus hr/hr1@xe</span> </p>
<h4>3.1 Database installation (SYS)</h4>
<p>First of all we need to grant the required privileges to the Oracle
user who will own the packages for the integration. </p>
<ol>
  <li>Extract the downloaded zip file.</li>
  <li>Open a command shell:
    <ul>
      <li><span class="formattedCode">e.g. on Windows: Start &gt;
Execute : cmd</span> </li>
    </ul>
  </li>
  <li>Go to the subdirectory sql (of where you extracted the file):
    <ul>
      <li><span class="formattedCode">cd sql </span> </li>
    </ul>
  </li>
  <li>Connect as SYS to the local instance (using sqlplus)
    <ul>
      <li><span class="formattedCode">sqlplus "sys/[sys
password]@[database] as sysdba" </span> </li>
    </ul>
  </li>
  <li>Run the installation script (and pass the name of the target
application schema as a parameter)
    <ul>
      <li><span class="formattedCode">@sys_install.sql [application
schema]</span></li>
    </ul>
  </li>
  <li>[optional] If you are installing on an Oracle Release 11.0 and
higher, you have to grant the required network privileges to the
application schema.&nbsp;
    <ul>
      <li><span style="font-style: italic;">The&nbsp; script
sys_install_acl.sql allows access to the local machine on port 80 to
port 10000. Please adapt the script to suit your needs, especially if
the J2EE server is running on a different machine. <span style="font-weight: bold;">It needs to be run for each application
schema using the integration.</span><br>
        </span></li>
      <li><span class="formattedCode">@sys_install_acl.sql [application
schema]</span><span class="formattedCode"></span></li>
    </ul>
  </li>
</ol>
<h4>3.2 Database installation (Application Schema)</h4>
<ol>
  <li>Open a command shell:
    <ul>
      <li><span class="formattedCode">e.g. on Windows: Start &gt;
Execute : cmd</span> </li>
    </ul>
  </li>
  <li>Go to the subdirectory sql (of where you extracted the file):
    <ul>
      <li><span class="formattedCode">cd sql </span> </li>
    </ul>
  </li>
  <li>Connect as the application schema to the local instance (using
sqlplus)
    <ul>
      <li><span class="formattedCode">sqlplus [application
schema]/[application schema password]@[database]</span></li>
    </ul>
  </li>
  <li>Run the installation script
    <ul>
      <li><span class="formattedCode">@user_install.sql </span> </li>
    </ul>
  </li>
</ol>
<h3><a name="Installation_of_the_test_application"></a>4. Installation
of
the test application</h3>
<p>The test application will allow for basic testing of the integration
with all relevant parts. Install the application file <span class="formattedCode">apex\f121_JasperReportsIntegration-Test_x.x.x.x.sql</span>
into your workspace.<br>
</p>
<p>It will perform checks on the installation and allow you to run the
test reports. <br>
</p>
<br>
<p><img style="border: 1px solid ; width: 700px; height: 466px;" alt="Screenshot of application tester" src="image/screenshot_359.jpg"></p>
<br>
<p>In some circumstances you can encounter errors, mostly due to
enhanced security constraints: <br>
</p>
<img style="border: 1px solid ; width: 592px; height: 850px;" alt="Expected errors during validation" src="image/Verify_Setup_errors.png"><br>
<br>
<ul>
  <li>Check 4 can fail when there is no valid index page for the J2EE
container</li>
  <li>Check 5 and Check 6 can fail, when the setting
infoPageIsEnabled=false in the application.properties file is set</li>
</ul>
Check 7 should be always be working correctly. <br>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<br>
<p><br>
</p>
</div>

</body></html>